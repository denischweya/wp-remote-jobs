(()=>{function e(e,t){let n;return function(...o){clearTimeout(n),n=setTimeout((()=>{clearTimeout(n),e(...o)}),t)}}jQuery(document).ready((function(t){let n=!1;if("undefined"==typeof remjobsAjax){if(console.warn("remjobsAjax not found, creating fallback..."),window.remjobsAjax={ajaxurl:"",nonce:""},"undefined"==typeof ajaxurl)return void console.error("AJAX URL not provided - ensure wp_localize_script is called with proper admin_url");window.remjobsAjax.ajaxurl=ajaxurl,t.ajax({url:window.remjobsAjax.ajaxurl,type:"POST",data:{action:"remjobs_ajax_get_nonce"},success:function(e){e.success&&e.data.nonce?(window.remjobsAjax.nonce=e.data.nonce,window.remjobsAjax.ajaxurl=e.data.ajaxurl,n=!0):(console.warn("Failed to get nonce from server:",e),n=!0)},error:function(e,t,o){console.warn("Error getting nonce from server:",t,o),n=!0}})}else n=!0;const o=t("#jobs-list"),a=t("#job-search"),r=t("#job-category"),i=t("#job-location"),c=t("#job-skills"),s=t("#clear-filters");function l(){if(!n)return void setTimeout((function(){l()}),500);if("undefined"==typeof remjobsAjax)return;const e=a.val()||"",s=r.val()||"",u=i.val()||"",d=c.val()||"";let j="grid";const f=t(".layout-toggle button.active");if(f.length){const e=f.data("layout");e&&(j=e)}o.html('<div class="loading">Loading jobs...</div>');const m={action:"remjobs_ajax_filter_jobs",nonce:remjobsAjax.nonce,search:e,category:s,location:u,skills:d,layout:j};t.ajax({url:remjobsAjax.ajaxurl,type:"POST",data:m,beforeSend:function(){},success:function(e){e.success?o.html(e.data.data):t.ajax({url:remjobsAjax.ajaxurl,type:"POST",data:{action:"remjobs_ajax_get_nonce"},success:function(e){e.success&&(window.remjobsAjax.nonce=e.data.nonce,l())}})},error:function(e,t,n){o.html('<div class="error">Error loading jobs</div>')}})}t(".job-search-form"),s.length&&s.on("click",(function(e){e.preventDefault(),a.val("").trigger("change"),r.val("").trigger("change"),i.val("").trigger("change"),c.val("").trigger("change"),l()})),r.on("change",e((function(){l()}),500)),i.on("change",e((function(){l()}),500)),c.on("change",e((function(){l()}),500)),a.on("input",e((function(){l()}),500));const u=t(".layout-toggle button");u.length&&u.on("click",(function(){const e=t(this).data("layout"),n=o.find('[class*="job-listings-"]');n.length&&(n.removeClass("job-listings-grid job-listings-list"),n.addClass("job-listings-"+e)),u.removeClass("is-primary active").addClass("is-secondary"),t(this).removeClass("is-secondary").addClass("is-primary active"),l()})),document.querySelectorAll(".save-job-button").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),e.dataset.jobId}))}))})),document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".job-card.premium, .job-row.premium").forEach((e=>{const t=document.createElement("div");t.className="premium-indicator",t.innerHTML='\n\t\t\t<svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">\n\t\t\t\t<path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"></path>\n\t\t\t</svg>\n\t\t',e.appendChild(t)}))})),document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".save-job-button").forEach((e=>{e.addEventListener("click",(function(t){t.preventDefault();const n=e.querySelector("svg");"none"===n.getAttribute("fill")?(n.setAttribute("fill","currentColor"),e.setAttribute("title","Saved")):(n.setAttribute("fill","none"),e.setAttribute("title","Save job"))}))}))}))})();