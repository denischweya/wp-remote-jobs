(()=>{function e(e,t){t.className.includes("job-listings-")?t.className=t.className.replace(/job-listings-(grid|list)/,`job-listings-${e}`):t.className=`job-listings-${e}`}function t(e,t){e.forEach((e=>{e.dataset.layout===t?e.classList.add("active"):e.classList.remove("active")}))}jQuery(document).ready((function(o){const a=o("#jobs-list"),l=o("#job-search"),s=o("#job-category"),n=o("#job-location"),r=o("#job-skills"),c=o("#filter-jobs");function i(){if(!a.length)return;const e={action:"filter_jobs",nonce:remjobsAjax.nonce,search:l.length?l.val():"",category:s.length?s.val():"",skills:r.length?r.val():"",location:n.length?n.val():""};console.log("Sending filter request with data:",e),a.html('<div class="loading">Loading...</div>'),o.ajax({url:remjobsAjax.ajaxurl,type:"POST",data:e,success:function(e){console.log("Received response:",e),e.success?a.html(e.data):a.html("<p>Error loading jobs. Please try again.</p>")},error:function(e,t,o){console.error("AJAX error:",{xhr:e,status:t,error:o}),a.html("<p>Error loading jobs. Please try again.</p>")}})}o(".job-search-form"),c.length&&c.on("click",(function(e){e.preventDefault(),console.log("Filter button clicked"),console.log("Current filter values:",{search:l.val(),category:s.val(),skills:r.val(),location:n.val()}),i()})),l.on("keyup",function(e){let t;return function(...o){clearTimeout(t),t=setTimeout((()=>{clearTimeout(t),e(...o)}),500)}}(i)),s.on("change",(function(){console.log("Category changed to:",o(this).val()),i()})),n.on("change",(function(){console.log("Location changed to:",o(this).val()),i()})),r.on("change",(function(){console.log("Skills changed to:",o(this).val()),i()}));const u=o(".layout-toggle button");u.length&&u.on("click",(function(){const e=o(this).data("layout");a.removeClass("grid list").addClass(e),u.removeClass("is-primary").addClass("is-secondary"),o(this).removeClass("is-secondary").addClass("is-primary")}));const d=document.querySelectorAll(".job-listings-container");d.length&&(d.forEach((o=>{const a=o.id,l=o.querySelectorAll(".layout-button"),s=o.querySelector('[class^="job-listings-"]');if(!l.length||!s)return;const n=o.dataset.layout||"grid";let r=function(e){return"undefined"!=typeof localStorage?localStorage.getItem(`remjobs_layout_${e}`):null}(a)||n;e(r,s),t(l,r),l.forEach((o=>{o.addEventListener("click",(()=>{const n=o.dataset.layout;n!==r&&(e(n,s),t(l,n),function(e,t){"undefined"!=typeof localStorage&&localStorage.setItem(`remjobs_layout_${e}`,t)}(a,n),r=n)}))})),function(e){const t=e.querySelector(".filter-button"),o=e.querySelector(".category-select"),a=e.querySelector(".location-select"),l=e.querySelector(".skills-select"),s=e.querySelector(".search-input");if(!t)return;const n=new URLSearchParams(window.location.search);s&&n.has("search")&&(s.value=n.get("search")),o&&n.has("category")&&(o.value=n.get("category")),a&&n.has("location")&&(a.value=n.get("location")),l&&n.has("skills")&&(l.value=n.get("skills")),t.addEventListener("click",(()=>{const e=o?o.value:"",t=a?a.value:"",n=l?l.value:"",r=s?s.value:"",c=new URL(window.location.href);e?c.searchParams.set("category",e):c.searchParams.delete("category"),t?c.searchParams.set("location",t):c.searchParams.delete("location"),n?c.searchParams.set("skills",n):c.searchParams.delete("skills"),r?c.searchParams.set("search",r):c.searchParams.delete("search"),window.location.href=c.toString()}))}(o)})),document.querySelectorAll(".save-job-button").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();const o=e.dataset.jobId;o&&(e.classList.toggle("saved"),console.log("Toggle saved state for job ID:",o))}))})))})),document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".job-card.premium, .job-row.premium").forEach((e=>{const t=document.createElement("div");t.className="premium-indicator",t.innerHTML='\n\t\t\t<svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">\n\t\t\t\t<path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"></path>\n\t\t\t</svg>\n\t\t',e.appendChild(t)}))})),document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".save-job-button").forEach((e=>{e.addEventListener("click",(function(t){t.preventDefault();const o=e.querySelector("svg");"none"===o.getAttribute("fill")?(o.setAttribute("fill","currentColor"),e.setAttribute("title","Saved")):(o.setAttribute("fill","none"),e.setAttribute("title","Save job"))}))}))}))})();